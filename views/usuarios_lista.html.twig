{% extends "layout.html.twig" %}

{% block title %}Lista de Usuários{% endblock %}

{% block content %}
    <h1>Lista de Usuários</h1>

    {% if usuarios is empty %}
        <p>Nenhum usuário encontrado.</p>
    {% else %}
        {# 1. Vamos remover as "bolinhas" da lista (ul) para ficar mais limpo #}
        <ul style="list-style: none; padding: 0;">
            
            {% for usuario in usuarios %}
                
                {# 2. Agora temos UM <li> por USUÁRIO. #}
                {# Eu adicionei uma borda para criar um "card" para cada um. #}
                <li style="border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 20px;">

                    {# 3. Todas as informações do usuário ficam aqui dentro #}
                    <p><strong>ID Usuario:</strong> {{ usuario.id }}</p>
                    <p><strong>Nome:</strong> {{ usuario.nome }}</p>
                    <p><strong>Usuário:</strong> {{ usuario.usuario }}</p>
                    <p><strong>Senha:</strong> {{ usuario.senha }} (Este é o hash criptografado)</p>
                    <p><strong>E-mail:</strong> {{ usuario.email }}</p>
                    <p><strong>Nível:</strong> {{ usuario.nivel }}</p>
                    <p><strong>Data Cadastro:</strong> {{ usuario.created_at }}</p>
                    <p><strong>Data Atualização:</strong> {{ usuario.updated_at }}</p>
                    
                    {# 4. Uma divisão para os botões #}
                    <hr style="margin-top: 15px;">
                    <div style="margin-top: 10px;">

                        {# 5. O LINK "Editar" (com seu estilo de botão) #}
                        <a href="/usuarios/editar/{{ usuario.id }}" style="
                            text-decoration: none; 
                            background-color: #007bff; 
                            color: white; 
                            padding: 5px 10px; 
                            border-radius: 4px;
                            font-size: 0.9em;
                            margin-right: 10px; {# <-- margem na direita #}
                        ">
                            Editar
                        </a>

                        {# 6. O FORM "Excluir" (com seu estilo de botão) #}
                        {# Agora ele é "irmão" do link, não "filho" #}
                        <form action="/usuarios/excluir/{{ usuario.id }}" method="POST" style="display: inline;">

                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" onclick="return confirm('Tem certeza que deseja excluir este usuário?');" style="
                                background-color: #dc3545; 
                                color: white; 
                                padding: 5px 10px; 
                                border-radius: 4px;
                                font-size: 0.9em;
                                border: none;
                                cursor: pointer;
                            ">
                                Excluir
                            </button>
                        </form>
                    </div>

                </li> {# 7. Fim do "card" do usuário #}
                
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}